<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to slurmjobs • slurmjobs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to slurmjobs">
<meta property="og:description" content="slurmjobs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">slurmjobs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.99.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/slurmjobs.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LieberInstitute/slurmjobs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to slurmjobs</h1>
                        <h4 data-toc-skip class="author">Nicholas J.
Eagles</h4>
            <address class="author_afil">
      Lieber Institute for Brain
Development<br><a class="author_email" href="mailto:#"></a><a href="mailto:nickeagles77@gmail.com" class="email">nickeagles77@gmail.com</a>
      </address>
                              <h4 data-toc-skip class="author">Leonardo
Collado-Torres</h4>
            <address class="author_afil">
      Lieber Institute for Brain DevelopmentCenter for Computational
Biology, Johns Hopkins
University<br><a class="author_email" href="mailto:#"></a><a href="mailto:lcolladotor@gmail.com" class="email">lcolladotor@gmail.com</a>
      </address>
                  
            <h4 data-toc-skip class="date">10 October 2023</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/LieberInstitute/slurmjobs/blob/HEAD/vignettes/slurmjobs.Rmd" class="external-link"><code>vignettes/slurmjobs.Rmd</code></a></small>
      <div class="hidden name"><code>slurmjobs.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="basics">Basics<a class="anchor" aria-label="anchor" href="#basics"></a>
</h2>
<div class="section level3">
<h3 id="install-slurmjobs">Install <code>slurmjobs</code><a class="anchor" aria-label="anchor" href="#install-slurmjobs"></a>
</h3>
<p><code>R</code> is an open-source statistical environment which can be
easily modified to enhance its functionality via packages. <em><a href="https://bioconductor.org/packages/3.17/slurmjobs" class="external-link">slurmjobs</a></em>
is a <code>R</code> package available via the <a href="http://bioconductor.org" class="external-link">Bioconductor</a> repository for packages.
<code>R</code> can be installed on any operating system from <a href="https://cran.r-project.org/" class="external-link">CRAN</a> after which you can install
<em><a href="https://bioconductor.org/packages/3.17/slurmjobs" class="external-link">slurmjobs</a></em>
by using the following commands in your <code>R</code> session:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://bioconductor.github.io/BiocManager/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"slurmjobs"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Check that you have a valid Bioconductor installation</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://bioconductor.github.io/BiocManager/reference/valid.html" class="external-link">valid</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="required-knowledge">Required knowledge<a class="anchor" aria-label="anchor" href="#required-knowledge"></a>
</h3>
<p><em><a href="https://bioconductor.org/packages/3.17/slurmjobs" class="external-link">slurmjobs</a></em>
is designed for interacting with the <a href="https://slurm.schedmd.com/" class="external-link">SLURM</a> job scheduler, and assumes
basic familiarity with terms like “job”, “task”, and “array”, as well as
the <a href="https://slurm.schedmd.com/sbatch.html" class="external-link">sbatch</a> command.
Background knowledge about memory (such as virtual memory and resident
set size (RSS)) is helpful but not critical in using this package.</p>
<p>If you are asking yourself the question “Where do I start using
Bioconductor?” you might be interested in <a href="http://lcolladotor.github.io/2014/10/16/startbioc/#.VkOKbq6rRuU" class="external-link">this
blog post</a>.</p>
</div>
<div class="section level3">
<h3 id="asking-for-help">Asking for help<a class="anchor" aria-label="anchor" href="#asking-for-help"></a>
</h3>
<p>As package developers, we try to explain clearly how to use our
packages and in which order to use the functions. But <code>R</code> and
<code>Bioconductor</code> have a steep learning curve so it is critical
to learn where to ask for help. The blog post quoted above mentions some
but we would like to highlight the <a href="https://support.bioconductor.org/" class="external-link">Bioconductor support site</a>
as the main resource for getting help: remember to use the
<code>slurmjobs</code> tag and check <a href="https://support.bioconductor.org/tag/slurmjobs/" class="external-link">the older
posts</a>. Other alternatives are available such as creating GitHub
issues and tweeting. However, please note that if you want to receive
help you should adhere to the <a href="http://www.bioconductor.org/help/support/posting-guide/" class="external-link">posting
guidelines</a>. It is particularly critical that you provide a small
reproducible example and your session information so package developers
can track down the source of the error.</p>
</div>
<div class="section level3">
<h3 id="citing-slurmjobs">Citing <code>slurmjobs</code><a class="anchor" aria-label="anchor" href="#citing-slurmjobs"></a>
</h3>
<p>We hope that <em><a href="https://bioconductor.org/packages/3.17/slurmjobs" class="external-link">slurmjobs</a></em>
will be useful for your research. Please use the following information
to cite the package and the overall approach. Thank you!</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Citation info</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"slurmjobs"</span><span class="op">)</span></span>
<span><span class="co">#&gt; To cite package 'slurmjobs' in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   LieberInstitute (2023). _slurmjobs: Helper Functions for SLURM Jobs_.</span></span>
<span><span class="co">#&gt;   doi:10.18129/B9.bioc.slurmjobs</span></span>
<span><span class="co">#&gt;   &lt;https://doi.org/10.18129/B9.bioc.slurmjobs&gt;,</span></span>
<span><span class="co">#&gt;   https://github.com/LieberInstitute/slurmjobs/slurmjobs - R package</span></span>
<span><span class="co">#&gt;   version 0.99.0, &lt;http://www.bioconductor.org/packages/slurmjobs&gt;.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   LieberInstitute (2023). "slurmjobs: Helper Functions for SLURM Jobs."</span></span>
<span><span class="co">#&gt;   _bioRxiv_. doi:10.1101/TODO &lt;https://doi.org/10.1101/TODO&gt;,</span></span>
<span><span class="co">#&gt;   &lt;https://www.biorxiv.org/content/10.1101/TODO&gt;.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; To see these entries in BibTeX format, use 'print(&lt;citation&gt;,</span></span>
<span><span class="co">#&gt; bibtex=TRUE)', 'toBibtex(.)', or set</span></span>
<span><span class="co">#&gt; 'options(citation.bibtex.max=999)'.</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><code>slurmjobs</code> provides helper functions for interacting with
<a href="https://slurm.schedmd.com/" class="external-link">SLURM</a>-managed
high-performance-computing environments from R. It includes functions
for creating submittable jobs (including array jobs), monitoring
partitions, and extracting info about running or complete jobs. In
addition to loading <code>slurmjobs</code>, we’ll be using
<code>dplyr</code> to manipulate example data about jobs.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/LieberInstitute/slurmjobs" class="external-link">"slurmjobs"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-shell-scripts-to-sbatch">Creating Shell Scripts to <code>sbatch</code><a class="anchor" aria-label="anchor" href="#creating-shell-scripts-to-sbatch"></a>
</h2>
<p>When processing data on a <a href="https://slurm.schedmd.com/" class="external-link">SLURM</a>-managed system, primarily
running R code, you’ll likely find yourself writing many “wrapper” shell
scripts that can be submitted via <code>sbatch</code> to the job
scheduler. This process requires precise SLURM-specific syntax and a
large amount of repetition. <code>job_single</code> aims to reduce
required configuration from the user to just a handful of options that
tend to vary most often between shell scripts (e.g. memory, number of
CPUs), and automate the rest of the shell-script-creation process.</p>
<p>Shell scripts created by <code>job_single</code> log key
reproducibility information, such as the user, job ID, job name, node
name, and when the job starts and ends.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#   With 'create_shell = FALSE', the contents of the potential shell script are</span></span>
<span><span class="co">#   only printed to the screen</span></span>
<span><span class="fu"><a href="../reference/job_single.html">job_single</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"my_shell_script"</span>, memory <span class="op">=</span> <span class="st">"10G"</span>, cores <span class="op">=</span> <span class="fl">2</span>, create_shell <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; 2023-10-10 16:14:48.792008 creating the logs directory at:  logs</span></span>
<span><span class="co">#&gt; #!/bin/bash</span></span>
<span><span class="co">#&gt; #SBATCH -p shared</span></span>
<span><span class="co">#&gt; #SBATCH --mem-per-cpu=10G</span></span>
<span><span class="co">#&gt; #SBATCH --job-name=my_shell_script</span></span>
<span><span class="co">#&gt; #SBATCH -c 2</span></span>
<span><span class="co">#&gt; #SBATCH -o logs/my_shell_script.txt</span></span>
<span><span class="co">#&gt; #SBATCH -e logs/my_shell_script.txt</span></span>
<span><span class="co">#&gt; #SBATCH --mail-type=ALL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; set -e</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** Job starts ****"</span></span>
<span><span class="co">#&gt; date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** JHPCE info ****"</span></span>
<span><span class="co">#&gt; echo "User: ${USER}"</span></span>
<span><span class="co">#&gt; echo "Job id: ${SLURM_JOB_ID}"</span></span>
<span><span class="co">#&gt; echo "Job name: ${SLURM_JOB_NAME}"</span></span>
<span><span class="co">#&gt; echo "Node name: ${SLURMD_NODENAME}"</span></span>
<span><span class="co">#&gt; echo "Task id: ${SLURM_ARRAY_TASK_ID}"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Load the R module</span></span>
<span><span class="co">#&gt; module load conda_R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## List current modules for reproducibility</span></span>
<span><span class="co">#&gt; module list</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Edit with your job command</span></span>
<span><span class="co">#&gt; Rscript -e "options(width = 120); sessioninfo::session_info()"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** Job ends ****"</span></span>
<span><span class="co">#&gt; date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## This script was made using slurmjobs version 0.99.0</span></span>
<span><span class="co">#&gt; ## available from http://research.libd.org/slurmjobs/</span></span></code></pre></div>
<p>Similarly, we can specify <code>task_num</code> to create an array
job– in this case, one with 10 tasks.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/job_single.html">job_single</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"my_array_job"</span>, memory <span class="op">=</span> <span class="st">"5G"</span>, cores <span class="op">=</span> <span class="fl">1</span>, create_shell <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    task_num <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; 2023-10-10 16:14:48.876895 creating the logs directory at:  logs</span></span>
<span><span class="co">#&gt; #!/bin/bash</span></span>
<span><span class="co">#&gt; #SBATCH -p shared</span></span>
<span><span class="co">#&gt; #SBATCH --mem-per-cpu=5G</span></span>
<span><span class="co">#&gt; #SBATCH --job-name=my_array_job</span></span>
<span><span class="co">#&gt; #SBATCH -c 1</span></span>
<span><span class="co">#&gt; #SBATCH -o logs/my_array_job.%a.txt</span></span>
<span><span class="co">#&gt; #SBATCH -e logs/my_array_job.%a.txt</span></span>
<span><span class="co">#&gt; #SBATCH --mail-type=ALL</span></span>
<span><span class="co">#&gt; #SBATCH --array=1-10%20</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; set -e</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** Job starts ****"</span></span>
<span><span class="co">#&gt; date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** JHPCE info ****"</span></span>
<span><span class="co">#&gt; echo "User: ${USER}"</span></span>
<span><span class="co">#&gt; echo "Job id: ${SLURM_JOB_ID}"</span></span>
<span><span class="co">#&gt; echo "Job name: ${SLURM_JOB_NAME}"</span></span>
<span><span class="co">#&gt; echo "Node name: ${SLURMD_NODENAME}"</span></span>
<span><span class="co">#&gt; echo "Task id: ${SLURM_ARRAY_TASK_ID}"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Load the R module</span></span>
<span><span class="co">#&gt; module load conda_R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## List current modules for reproducibility</span></span>
<span><span class="co">#&gt; module list</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Edit with your job command</span></span>
<span><span class="co">#&gt; Rscript -e "options(width = 120); sessioninfo::session_info()"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** Job ends ****"</span></span>
<span><span class="co">#&gt; date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## This script was made using slurmjobs version 0.99.0</span></span>
<span><span class="co">#&gt; ## available from http://research.libd.org/slurmjobs/</span></span></code></pre></div>
<p><code><a href="../reference/job_loop.html">job_loop()</a></code> is a little bit more complicated since you
have to specify the <code>loops</code> named list argument. The
<code>loops</code> argument specifies the <code>bash</code> variable
names and values to loop through for creating a series of
<code>bash</code> scripts that will get submitted to SLURM. This type of
<code>bash</code> script is something we use frequently, for example in
the <a href="https://github.com/LieberInstitute/brainseq_phase2/blob/master/twas/compute_weights.sh" class="external-link"><code>compute_weights.sh</code></a>
script (Collado-Torres, Burke, Peterson, Shin, Straub, Rajpurohit,
Semick, Ulrich, Price, Valencia, Tao, Deep-Soboslay, Hyde, Kleinman,
Weinberger, and Jaffe, 2019). This type of script generator I believe is
something <a href="http://alyssafrazee.com/" class="external-link">Alyssa Frazee</a> taught me
back in the day which you can see in some old repositories such as <a href="https://github.com/leekgroup/derSoftware" class="external-link"><code>leekgroup/derSoftware</code></a>.
Besides the <code>loops</code> argument, <code><a href="../reference/job_loop.html">job_loop()</a></code> shares
most of the options with <code><a href="../reference/job_single.html">job_single()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/job_loop.html">job_loop</a></span><span class="op">(</span></span>
<span>    loops <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DLPFC"</span>, <span class="st">"HIPPO"</span><span class="op">)</span>, feature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gene"</span>, <span class="st">"exon"</span>, <span class="st">"tx"</span>, <span class="st">"jxn"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"bsp2_test"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; #!/bin/bash</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Usage:</span></span>
<span><span class="co">#&gt; # sh bsp2_test.sh</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Create the logs directory</span></span>
<span><span class="co">#&gt; mkdir -p logs</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; for region in DLPFC HIPPO; do</span></span>
<span><span class="co">#&gt;     for feature in gene exon tx jxn; do</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     ## Internal script name</span></span>
<span><span class="co">#&gt;     SHORT="bsp2_test_${region}_${feature}"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     # Construct shell file</span></span>
<span><span class="co">#&gt;     echo "Creating script bsp2_test_${region}_${feature}"</span></span>
<span><span class="co">#&gt;     cat &gt; .${SHORT}.sh &lt;&lt;EOF</span></span>
<span><span class="co">#&gt; #!/bin/bash</span></span>
<span><span class="co">#&gt; #SBATCH -p shared</span></span>
<span><span class="co">#&gt; #SBATCH --mem-per-cpu=10G</span></span>
<span><span class="co">#&gt; #SBATCH --job-name=${SHORT}</span></span>
<span><span class="co">#&gt; #SBATCH -c 1</span></span>
<span><span class="co">#&gt; #SBATCH -o logs/${SHORT}.txt</span></span>
<span><span class="co">#&gt; #SBATCH -e logs/${SHORT}.txt</span></span>
<span><span class="co">#&gt; #SBATCH --mail-type=ALL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; set -e</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** Job starts ****"</span></span>
<span><span class="co">#&gt; date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** JHPCE info ****"</span></span>
<span><span class="co">#&gt; echo "User: \${USER}"</span></span>
<span><span class="co">#&gt; echo "Job id: \${SLURM_JOB_ID}"</span></span>
<span><span class="co">#&gt; echo "Job name: \${SLURM_JOB_NAME}"</span></span>
<span><span class="co">#&gt; echo "Node name: \${SLURMD_NODENAME}"</span></span>
<span><span class="co">#&gt; echo "Task id: \${SLURM_ARRAY_TASK_ID}"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Load the R module</span></span>
<span><span class="co">#&gt; module load conda_R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## List current modules for reproducibility</span></span>
<span><span class="co">#&gt; module list</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## Edit with your job command</span></span>
<span><span class="co">#&gt; Rscript -e "options(width = 120); print('${region}'); print('${feature}'); sessioninfo::session_info()"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; echo "**** Job ends ****"</span></span>
<span><span class="co">#&gt; date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## This script was made using slurmjobs version 0.99.0</span></span>
<span><span class="co">#&gt; ## available from http://research.libd.org/slurmjobs/</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; EOF</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     call="sbatch .${SHORT}.sh"</span></span>
<span><span class="co">#&gt;     echo $call</span></span>
<span><span class="co">#&gt;     $call</span></span>
<span><span class="co">#&gt;     done</span></span>
<span><span class="co">#&gt; done</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="submitting-and-resubmitting-jobs">Submitting and Resubmitting Jobs<a class="anchor" aria-label="anchor" href="#submitting-and-resubmitting-jobs"></a>
</h2>
<p>Shell scripts created with <code><a href="../reference/job_single.html">job_single()</a></code> or
<code><a href="../reference/job_loop.html">job_loop()</a></code> may be submitted as batch jobs with
<code>sbatch</code> (e.g. <code>sbatch myscript.sh</code>). Note no
additional arguments to <code>sbatch</code> are required since all
configuration is specified within the shell script.</p>
<p>The <code><a href="../reference/array_submit.html">array_submit()</a></code> helper function was also intended to
make job submission easier. In particular, it addresses a common case
where after a large array job was run, a handful of tasks fail (such as
due to temporary file-system issues). <code><a href="../reference/array_submit.html">array_submit()</a></code> helps
re-submit failed tasks.</p>
<p>Below we’ll create an example array job with
<code><a href="../reference/job_single.html">job_single()</a></code>, then do a dry run of
<code><a href="../reference/array_submit.html">array_submit()</a></code> to demonstrate its basic usage.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/job_single.html">job_single</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"my_array_job"</span>, memory <span class="op">=</span> <span class="st">"5G"</span>, cores <span class="op">=</span> <span class="fl">1</span>, create_shell <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    task_num <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; 2023-10-10 16:14:49.664747 creating the logs directory at:  logs</span></span>
<span><span class="co">#&gt; 2023-10-10 16:14:49.6662 creating the shell file my_array_job.sh</span></span>
<span><span class="co">#&gt; To submit the job use: sbatch my_array_job.sh</span></span>
<span></span>
<span><span class="co">#   Suppose that tasks 3, 6, 7, and 8 failed</span></span>
<span><span class="fu"><a href="../reference/array_submit.html">array_submit</a></span><span class="op">(</span><span class="st">"my_array_job.sh"</span>, task_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>, submit <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>While <code>task_ids</code> can be provided explicitly as above, the
real convenience comes from the ability to run
<code><a href="../reference/array_submit.html">array_submit()</a></code> without specifying <code>task_ids</code>. As
long as the original array job was created with
<code><a href="../reference/job_single.html">job_single()</a></code> or <code><a href="../reference/job_loop.html">job_loop()</a></code> and submitted as-is
(on the full set of tasks), <code><a href="../reference/array_submit.html">array_submit()</a></code> can
automatically find the failed tasks by reading the shell script
(<code>my_array_job.sh</code>), grabbing the original array job ID from
the log, and internally calling <code><a href="../reference/job_report.html">job_report()</a></code>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#   Not run here, since we aren't on a SLURM cluster</span></span>
<span><span class="fu"><a href="../reference/array_submit.html">array_submit</a></span><span class="op">(</span><span class="st">"my_array_job.sh"</span>, submit <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="monitoring-running-jobs">Monitoring Running Jobs<a class="anchor" aria-label="anchor" href="#monitoring-running-jobs"></a>
</h2>
<p>The <code><a href="../reference/job_info.html">job_info()</a></code> function provides wrappers around the
<code>squeue</code> and <code>sstat</code> utilities SLURM provides for
monitoring specific jobs and how busy partitions are. The general idea
is to provide the information output from <code>squeue</code> into a
<code>tibble</code>, while retrieving memory-utilization information
that ordinarily must be retrieved manually on a job-by-job basis with
<code>sstat -j [specific job ID]</code>.</p>
<p>On a SLURM system, you’d run
<code>job_info_df = job_info(user = NULL, partition = "shared")</code>
here, to get every user’s jobs running on the “shared” partition. We’ll
load an example output directly here.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#   On a real SLURM system</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">job_info_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 10</span></span></span>
<span><span class="co">#&gt;    job_id max_rss_gb max_vmem_gb user  array_task_id name     partition  cpus</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">220</span>842         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user1 <span style="color: #BB0000;">NA</span>            my_job_1 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">221</span>913         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 60            my_job_2 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">221</span>940         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 61            my_job_2 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">222</span>446         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 73            my_job_2 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">225</span>071         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 84            my_job_2 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">225</span>430         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 88            my_job_2 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">226</span>820         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 94            my_job_2 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">264</span>086         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 66            my_job_3 shared        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">265</span>466         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 67            my_job_3 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">269</span>608         <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span> user2 13            my_job_4 shared        2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 90 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: requested_mem_gb &lt;dbl&gt;, status &lt;fct&gt;</span></span></span></code></pre></div>
<p>The benefit to having this data in R, now, is to be able to trivially
ask summarizing questions. First, “how much memory and how many CPUs am
I currently using?” Knowing this answer can help ensure fair and civil
use of shared computing resources, for example on a computing
cluster.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_info_df</span> <span class="op">|&gt;</span></span>
<span>    <span class="co">#   Or your username here</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">user</span> <span class="op">==</span> <span class="st">"user21"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="co">#   Get the number of CPUs requested and the memory requested in GB</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>        total_mem_req <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">requested_mem_gb</span><span class="op">)</span>,</span>
<span>        total_cpus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">cpus</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   total_mem_req total_cpus</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>            60          2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analyzing-finished-jobs">Analyzing Finished Jobs<a class="anchor" aria-label="anchor" href="#analyzing-finished-jobs"></a>
</h2>
<p>The <code><a href="../reference/job_report.html">job_report()</a></code> function returns in-depth information
about a single queued, running, or finished job (including a single
array job). It combines functionality from SLURM’s <code>sstat</code>
and <code>sacct</code> to return a tibble for easy manipulation in
R.</p>
<p>Suppose you have a workflow that operates as an array job, and you’d
like to profile memory usage across the many tasks. Suppose we’ve done
an initial trial, setting memory relatively high just to get the jobs
running without issues. One use of <code>job_report</code> could be to
determine a better memory request in a data-driven way– the better
settings can then be run on the larger dataset after the initial
test.</p>
<p>On an actual system with SLURM installed, you’d normally run
something like <code>job_df = job_report(slurm_job_id)</code> for the
<code>slurm_job_id</code> (character or integer) representing the small
test. For convenience, we’ll start from the output of
<code>job_report</code> as available in the <code>slurmjobs</code>
package.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">job_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"job_report_df.rds"</span>, package <span class="op">=</span> <span class="st">"slurmjobs"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">job_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 11</span></span></span>
<span><span class="co">#&gt;    job_id user  name     partition  cpus requested_mem_gb max_rss_gb max_vmem_gb</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 297332 user1 broken_… shared        2                5       0.04        0.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 297333 user1 broken_… shared        2                5       0.48        0.48</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 297334 user1 broken_… shared        2                5       0.61        0.61</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 297335 user1 broken_… shared        2                5       0.04        0.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 297336 user1 broken_… shared        2                5       1.15        1.15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 297337 user1 broken_… shared        2                5       1.38        1.38</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 297338 user1 broken_… shared        2                5       0.04        0.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 297339 user1 broken_… shared        2                5       0.04        0.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 297340 user1 broken_… shared        2                5       0.04        0.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 297331 user1 broken_… shared        2                5       1.16        1.16</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: array_task_id &lt;int&gt;, exit_code &lt;dbl&gt;, status &lt;fct&gt;</span></span></span></code></pre></div>
<p>Now let’s choose a better memory request:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stat_df</span> <span class="op">&lt;-</span> <span class="va">job_df</span> <span class="op">|&gt;</span></span>
<span>    <span class="co">#   This example includes tasks that fail. We're only interested in memory</span></span>
<span>    <span class="co">#   for successfully completed tasks</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">status</span> <span class="op">!=</span> <span class="st">"FAILED"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>        mean_mem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">max_vmem_gb</span><span class="op">)</span>,</span>
<span>        std_mem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">max_vmem_gb</span><span class="op">)</span>,</span>
<span>        max_mem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">max_vmem_gb</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co">#   We could choose a new memory request as 3 standard deviations above the mean</span></span>
<span><span class="co">#   of actual memory usage</span></span>
<span><span class="va">new_limit</span> <span class="op">&lt;-</span> <span class="va">stat_df</span><span class="op">$</span><span class="va">mean_mem</span> <span class="op">+</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">stat_df</span><span class="op">$</span><span class="va">std_mem</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span></span>
<span>        <span class="st">"%.02fG is a better memory request than %.02fG, which was used before"</span>,</span>
<span>        <span class="va">new_limit</span>,</span>
<span>        <span class="va">job_df</span><span class="op">$</span><span class="va">requested_mem_gb</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2.12G is a better memory request than 5.00G, which was used before"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reproducibility">Reproducibility<a class="anchor" aria-label="anchor" href="#reproducibility"></a>
</h2>
<p>The <em><a href="https://bioconductor.org/packages/3.17/slurmjobs" class="external-link">slurmjobs</a></em>
package (LieberInstitute, 2023) was made possible thanks to:</p>
<ul>
<li>R (R Core Team, 2023)</li>
<li>
<em><a href="https://bioconductor.org/packages/3.17/BiocStyle" class="external-link">BiocStyle</a></em>
(Oleś, 2023)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=dplyr" class="external-link">dplyr</a></em> (Wickham,
François, Henry, Müller, and Vaughan, 2023)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=knitr" class="external-link">knitr</a></em> (Xie,
2023)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=RefManageR" class="external-link">RefManageR</a></em>
(McLean, 2017)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=rmarkdown" class="external-link">rmarkdown</a></em>
(Allaire, Xie, Dervieux, McPherson, Luraschi, Ushey, Atkins, Wickham,
Cheng, Chang, and Iannone, 2023)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=sessioninfo" class="external-link">sessioninfo</a></em>
(Wickham, Chang, Flight, Müller, and Hester, 2021)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=testthat" class="external-link">testthat</a></em>
(Wickham, 2011)</li>
</ul>
<p>This package was developed using <em><a href="https://bioconductor.org/packages/3.17/biocthis" class="external-link">biocthis</a></em>.</p>
<p>Code for creating the vignette</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Create the vignette</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/rstudio/rmarkdown" class="external-link">"rmarkdown"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">render</a></span><span class="op">(</span><span class="st">"slurmjobs.Rmd"</span>, <span class="st">"BiocStyle::html_document"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Extract the R code</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://yihui.org/knitr/" class="external-link">"knitr"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/knit.html" class="external-link">knit</a></span><span class="op">(</span><span class="st">"slurmjobs.Rmd"</span>, tangle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Date the vignette was generated.</p>
<pre><code><span><span class="co">#&gt; [1] "2023-10-10 16:14:50 UTC"</span></span></code></pre>
<p>Wallclock time spent generating the vignette.</p>
<pre><code><span><span class="co">#&gt; Time difference of 2.77 secs</span></span></code></pre>
<p><code>R</code> session information.</p>
<pre><code><span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">setting </span> <span style="color: #555555; font-style: italic;">value</span></span></span>
<span><span class="co">#&gt;  version  R version 4.3.1 (2023-06-16)</span></span>
<span><span class="co">#&gt;  os       Ubuntu 22.04.3 LTS</span></span>
<span><span class="co">#&gt;  system   x86_64, linux-gnu</span></span>
<span><span class="co">#&gt;  ui       X11</span></span>
<span><span class="co">#&gt;  language en</span></span>
<span><span class="co">#&gt;  collate  en_US.UTF-8</span></span>
<span><span class="co">#&gt;  ctype    en_US.UTF-8</span></span>
<span><span class="co">#&gt;  tz       UTC</span></span>
<span><span class="co">#&gt;  date     2023-10-10</span></span>
<span><span class="co">#&gt;  pandoc   3.1.1 @ /usr/local/bin/ (via rmarkdown)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">package      </span> <span style="color: #555555; font-style: italic;">*</span> <span style="color: #555555; font-style: italic;">version</span> <span style="color: #555555; font-style: italic;">date (UTC)</span> <span style="color: #555555; font-style: italic;">lib</span> <span style="color: #555555; font-style: italic;">source</span></span></span>
<span><span class="co">#&gt;  backports       1.4.1   <span style="color: #555555;">2021-12-13</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  bibtex          0.5.1   <span style="color: #555555;">2023-01-26</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  BiocManager     1.30.22 <span style="color: #555555;">2023-08-08</span> <span style="color: #555555;">[2]</span> <span style="color: #555555;">CRAN (R 4.3.1)</span></span></span>
<span><span class="co">#&gt;  BiocStyle     * 2.28.1  <span style="color: #555555;">2023-09-14</span> <span style="color: #555555;">[1]</span> <span style="color: #555555;">Bioconductor</span></span></span>
<span><span class="co">#&gt;  bookdown        0.35    <span style="color: #555555;">2023-08-09</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  bslib           0.5.1   <span style="color: #555555;">2023-08-11</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  cachem          1.0.8   <span style="color: #555555;">2023-05-01</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  cli             3.6.1   <span style="color: #555555;">2023-03-23</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  crayon          1.5.2   <span style="color: #555555;">2022-09-29</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  curl            5.1.0   <span style="color: #555555;">2023-10-02</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  desc            1.4.2   <span style="color: #555555;">2022-09-08</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  digest          0.6.33  <span style="color: #555555;">2023-07-07</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  dplyr         * 1.1.3   <span style="color: #555555;">2023-09-03</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  evaluate        0.22    <span style="color: #555555;">2023-09-29</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  fansi           1.0.5   <span style="color: #555555;">2023-10-08</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  fastmap         1.1.1   <span style="color: #555555;">2023-02-24</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  fs              1.6.3   <span style="color: #555555;">2023-07-20</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  generics        0.1.3   <span style="color: #555555;">2022-07-05</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  glue            1.6.2   <span style="color: #555555;">2022-02-24</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  htmltools       0.5.6.1 <span style="color: #555555;">2023-10-06</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  httr            1.4.7   <span style="color: #555555;">2023-08-15</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  jquerylib       0.1.4   <span style="color: #555555;">2021-04-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  jsonlite        1.8.7   <span style="color: #555555;">2023-06-29</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  knitcitations * 1.0.12  <span style="color: #555555;">2021-01-10</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  knitr           1.44    <span style="color: #555555;">2023-09-11</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  lifecycle       1.0.3   <span style="color: #555555;">2022-10-07</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  lubridate       1.9.3   <span style="color: #555555;">2023-09-27</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  magrittr        2.0.3   <span style="color: #555555;">2022-03-30</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  memoise         2.0.1   <span style="color: #555555;">2021-11-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  pillar          1.9.0   <span style="color: #555555;">2023-03-22</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  pkgconfig       2.0.3   <span style="color: #555555;">2019-09-22</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  pkgdown         2.0.7   <span style="color: #555555;">2022-12-14</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  plyr            1.8.9   <span style="color: #555555;">2023-10-02</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  purrr           1.0.2   <span style="color: #555555;">2023-08-10</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  R6              2.5.1   <span style="color: #555555;">2021-08-19</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  ragg            1.2.5   <span style="color: #555555;">2023-01-12</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  Rcpp            1.0.11  <span style="color: #555555;">2023-07-06</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  RefManageR    * 1.4.0   <span style="color: #555555;">2022-09-30</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  rlang           1.1.1   <span style="color: #555555;">2023-04-28</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  rmarkdown       2.25    <span style="color: #555555;">2023-09-18</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  rprojroot       2.0.3   <span style="color: #555555;">2022-04-02</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  sass            0.4.7   <span style="color: #555555;">2023-07-15</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  sessioninfo   * 1.2.2   <span style="color: #555555;">2021-12-06</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  slurmjobs     * 0.99.0  <span style="color: #555555;">2023-10-10</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">local</span></span></span>
<span><span class="co">#&gt;  stringi         1.7.12  <span style="color: #555555;">2023-01-11</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  stringr         1.5.0   <span style="color: #555555;">2022-12-02</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  systemfonts     1.0.5   <span style="color: #555555;">2023-10-09</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  textshaping     0.3.7   <span style="color: #555555;">2023-10-09</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  tibble          3.2.1   <span style="color: #555555;">2023-03-20</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  tidyselect      1.2.0   <span style="color: #555555;">2022-10-10</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  timechange      0.2.0   <span style="color: #555555;">2023-01-11</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  utf8            1.2.3   <span style="color: #555555;">2023-01-31</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  vctrs           0.6.3   <span style="color: #555555;">2023-06-14</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  xfun            0.40    <span style="color: #555555;">2023-08-09</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  xml2            1.3.5   <span style="color: #555555;">2023-07-06</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt;  yaml            2.3.7   <span style="color: #555555;">2023-01-23</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM (R 4.3.0)</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [1] /__w/_temp/Library</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [2] /usr/local/lib/R/site-library</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [3] /usr/local/lib/R/library</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="bibliography">Bibliography<a class="anchor" aria-label="anchor" href="#bibliography"></a>
</h2>
<p>This vignette was generated using <em><a href="https://bioconductor.org/packages/3.17/BiocStyle" class="external-link">BiocStyle</a></em>
(Oleś, 2023) with <em><a href="https://CRAN.R-project.org/package=knitr" class="external-link">knitr</a></em> (Xie,
2023) and <em><a href="https://CRAN.R-project.org/package=rmarkdown" class="external-link">rmarkdown</a></em>
(Allaire, Xie, Dervieux et al., 2023) running behind the scenes.</p>
<p>Citations made with <em><a href="https://CRAN.R-project.org/package=RefManageR" class="external-link">RefManageR</a></em>
(McLean, 2017).</p>
<p>
<a id="bib-allaire2023rmarkdown"></a><a href="#cite-allaire2023rmarkdown">[1]</a><cite>
J. Allaire, Y. Xie, C. Dervieux, et al. <em>rmarkdown: Dynamic Documents
for R</em>. R package version 2.25. 2023. URL:
<a href="https://github.com/rstudio/rmarkdown" class="external-link">https://github.com/rstudio/rmarkdown</a>.</cite>
</p>
<p>
<a id="bib-lieberinstitute2023slurmjobs"></a><a href="#cite-lieberinstitute2023slurmjobs">[2]</a><cite>
LieberInstitute. <em>slurmjobs: Helper Functions for SLURM Jobs</em>. <a href="https://github.com/LieberInstitute/slurmjobs/slurmjobs" class="external-link uri">https://github.com/LieberInstitute/slurmjobs/slurmjobs</a> -
R package version 0.99.0. 2023. DOI:
<a href="https://doi.org/10.18129/B9.bioc.slurmjobs" class="external-link">10.18129/B9.bioc.slurmjobs</a>.
URL:
<a href="http://www.bioconductor.org/packages/slurmjobs" class="external-link">http://www.bioconductor.org/packages/slurmjobs</a>.</cite>
</p>
<p>
<a id="bib-mclean2017refmanager"></a><a href="#cite-mclean2017refmanager">[3]</a><cite>
M. W. McLean. “RefManageR: Import and Manage BibTeX and BibLaTeX
References in R”. In: <em>The Journal of Open Source Software</em>
(2017). DOI:
<a href="https://doi.org/10.21105/joss.00338" class="external-link">10.21105/joss.00338</a>.</cite>
</p>
<p>
<a id="bib-ole2023biocstyle"></a><a href="#cite-ole2023biocstyle">[4]</a><cite>
A. Oleś. <em>BiocStyle: Standard styles for vignettes and other
Bioconductor documents</em>. R package version 2.28.1. 2023. DOI:
<a href="https://doi.org/10.18129/B9.bioc.BiocStyle" class="external-link">10.18129/B9.bioc.BiocStyle</a>.
URL:
<a href="https://bioconductor.org/packages/BiocStyle" class="external-link">https://bioconductor.org/packages/BiocStyle</a>.</cite>
</p>
<p>
<a id="bib-2023language"></a><a href="#cite-2023language">[5]</a><cite>
R Core Team. <em>R: A Language and Environment for Statistical
Computing</em>. R Foundation for Statistical Computing. Vienna, Austria,
2023. URL:
<a href="https://www.R-project.org/" class="external-link">https://www.R-project.org/</a>.</cite>
</p>
<p>
<a id="bib-wickham2011testthat"></a><a href="#cite-wickham2011testthat">[6]</a><cite>
H. Wickham. “testthat: Get Started with Testing”. In: <em>The R
Journal</em> 3 (2011), pp. 5–10. URL:
<a href="https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf" class="external-link">https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf</a>.</cite>
</p>
<p>
<a id="bib-wickham2021sessioninfo"></a><a href="#cite-wickham2021sessioninfo">[7]</a><cite>
H. Wickham, W. Chang, R. Flight, et al. <em>sessioninfo: R Session
Information</em>. <a href="https://github.com/r-lib/sessioninfo#readme" class="external-link uri">https://github.com/r-lib/sessioninfo#readme</a>, <a href="https://r-lib.github.io/sessioninfo/" class="external-link uri">https://r-lib.github.io/sessioninfo/</a>. 2021.</cite>
</p>
<p>
<a id="bib-wickham2023dplyr"></a><a href="#cite-wickham2023dplyr">[8]</a><cite>
H. Wickham, R. François, L. Henry, et al. <em>dplyr: A Grammar of Data
Manipulation</em>. <a href="https://dplyr.tidyverse.org" class="external-link uri">https://dplyr.tidyverse.org</a>, <a href="https://github.com/tidyverse/dplyr" class="external-link uri">https://github.com/tidyverse/dplyr</a>. 2023.</cite>
</p>
<p>
<a id="bib-xie2023knitr"></a><a href="#cite-xie2023knitr">[9]</a><cite>
Y. Xie. <em>knitr: A General-Purpose Package for Dynamic Report
Generation in R</em>. R package version 1.44. 2023. URL:
<a href="https://yihui.org/knitr/" class="external-link">https://yihui.org/knitr/</a>.</cite>
</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicholas J. Eagles.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
