% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/job_loop.R
\name{job_loop}
\alias{job_loop}
\title{Build a bash script that loops over variables and submits SLURM jobs}
\usage{
job_loop(
  loops,
  name,
  create_shell = FALSE,
  partition = "shared",
  memory = "10G",
  cores = 1L,
  tc = 20,
  email = "ALL",
  logdir = "logs"
)
}
\arguments{
\item{loops}{A named \code{list} where each of the elements are character vectors.
The names of \code{loops} specify the variables used for the loops and the
contents specify the options to loop through for each variable.}

\item{name}{A \code{character(1)} vector with the name of the script. Any spaces
will be replaced by underscores.}

\item{create_shell}{A \code{logical(1)} vector specifying whether to create a
shell file for the script.}

\item{partition}{A \code{character(1)} vector with the name of the SLURM
partition. Check how busy a given partition is by running
\code{squeue -p [partition]}.}

\item{memory}{The amount of memory per core to request. You can check how
much a current job is utilizing using the \code{sstat} command.}

\item{cores}{The number of cores to request. Note that the total memory
your job will request is \code{cores} multiplied by \code{memory}.}

\item{tc}{If \code{task_num} is specified, this option controls the number of
concurrent tasks.}

\item{email}{The email reporting option for the email address ("BEGIN",
"END", "FAIL", or "ALL")}

\item{logdir}{The directory to contain the log, as an absolute or relative
path.}
}
\value{
A length-2 list of character vectors containing the contents of the
R and shell scripts
}
\description{
This function builds a bash script functioning as an array job that loops
over a set of variables with pre-specified values.
}
\examples{

job_loop(
    loops = list(region = c("DLPFC", "HIPPO"), feature = c("gene", "exon", "tx", "jxn")),
    name = "bsp2_test_array",
    cores = 2
)

}
\seealso{
Other shell-script creation and submission functions: 
\code{\link{array_submit}()},
\code{\link{job_single}()}
}
\author{
Nicholas J. Eagles

Leonardo Collado-Torres
}
\concept{shell-script creation and submission functions}
