% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/job_single.R
\name{job_single}
\alias{job_single}
\title{Build a SLURM job bash script}
\usage{
job_single(
  name,
  create_shell = FALSE,
  partition = "shared",
  memory = "10G",
  cores = 1L,
  email = "ALL",
  logdir = "logs",
  task_num = NULL,
  tc = 20,
  command = "Rscript -e \\"options(width = 120); sessioninfo::session_info()\\"",
  create_logdir = TRUE
)
}
\arguments{
\item{name}{A \code{character(1)} vector giving either the name or path (relative
or absolute) to the shell script to create.}

\item{create_shell}{A \code{logical(1)} vector specifying whether to create a
shell file for the script.}

\item{partition}{A \code{character(1)} vector with the name of the SLURM
partition. Check how busy a given partition is by running
\code{squeue -p [partition]}.}

\item{memory}{character(1): the amount of memory in total to request, as a
number and unit accepted by the '--mem' SLURM parameter (e.g. '10G')}

\item{cores}{The number of cores to request. Note that the total memory
your job will request is \code{cores} multiplied by \code{memory}.}

\item{email}{The email reporting option for the email address ("BEGIN",
"END", "FAIL", or "ALL")}

\item{logdir}{The directory to contain the log, as an absolute or relative
path.}

\item{task_num}{The number of tasks for your job, which will make it into an
array job. If \code{NULL} this is ignored.}

\item{tc}{If \code{task_num} is specified, this option controls the number of
concurrent tasks.}

\item{command}{An example command to start your script.}

\item{create_logdir}{A \code{logical(1)} vector specifying whether to create the
\code{logdir} directory. Note that if \code{logdir} doesn't exist and you submit your
job with \code{sbatch}, it will immediately fail.}
}
\value{
A character vector with the script contents. If \code{create_shell} was
specified then it also creates the actual script.
}
\description{
This function builds a template for a Simple Linux Utility for Resource
Management (SLURM) job script including array jobs. Check this blog post by
John Muschelli to learn more about array jobs:
\url{https://hopstat.wordpress.com/2013/11/05/array-and-sequential-cluster-jobs/}.
}
\details{
For a given SLURM job that is currently running you can alter
the options using \verb{scontrol alter}.
}
\examples{

## A regular job, specified by name or path
job_single("jhpce_job", create_logdir = FALSE)
job_single("~/jhpce_job.sh", create_logdir = FALSE)

## A regular job with 10 cores on the 'imaginary' partition
job_single("jhpce_job",
    cores = 10, partition = "imaginary",
    create_logdir = FALSE
)

## An array job
job_single("jhpce_job_array", task_num = 20, create_logdir = FALSE)

}
\seealso{
Other shell-script creation and submission functions: 
\code{\link{array_submit}()},
\code{\link{job_loop}()}
}
\author{
Leonardo Collado-Torres

Nicholas J. Eagles
}
\concept{shell-script creation and submission functions}
